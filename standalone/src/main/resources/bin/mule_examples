#! /bin/sh

######################################################################
# Deploy examples and launch Mule ESB
######################################################################

URL=http://localhost:18082/examples/

######################################################################
# Deploy examples and launch Mule ESB
######################################################################

$MULE_HOME/bin/launcher $MULE_HOME/bin/mule_examples.groovy "${URL}"
EXIT_STATUS=$?

if [ "$EXIT_STATUS" -ne "0" ] ; then
        echo "ERROR: $EXIT_STATUS. Please check logs to see why Mule ESB is not starting"
        exit $EXIT_STATUS
fi

######################################################################
# Open broweser and launch application
######################################################################

# MAC
if [ -n "`which open`" ]; then
	open "${URL}"
	exit 0
fi

# Linux Browsers
for B in "firefox" "opera" "konqueror" "epiphany" "mozilla" "netscape"
do
if [ -n "`which $B`" ]; then
        $B "${URL}"
        exit 0
fi
done

echo "No default browser found. Example launcher URL: ${URL}"
exit 1
